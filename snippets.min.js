var tags=[];init(getSheetId());
function init(a){"true"==getUrlParam("post")&&$("#new-snippet-container").show();$.getJSON("https://spreadsheets.google.com/feeds/list/"+a+"/od6/public/values?alt=json",function(a){$("#loading-snippet").remove();a=a.feed.entry;a.reverse();$(".snippet-counter").html(a.length+" snippets found");$.each(a,function(a,b){var c=micromarkdown.parse(b.gsx$meta.$t),e=b.gsx$title.$t,d=b.gsx$title.$t.toLowerCase().replace(/[^a-zA-Z0-9 ]/g,"").replace(/[ ]/g,"_"),f=micromarkdown.parse(b.gsx$content.$t);snippet_tags=
b.gsx$tags.$t.split(",").map(function(a){return a.trim()});tags=tags.concat(snippet_tags);tags_class=tags_html="";$.each(snippet_tags,function(a,b){tags_html+='<span class="snippet-tags float-right">'+b+"</span>";tags_class+=b+" "});c='<li id="'+d+'" class="snippet-li '+tags_class+'">\n                            <a class="snippet-title" href="#'+d+'">'+e+"</a>\n                             "+tags_html+'\n                            <div class="snippet-content">'+f+'</div>\n                            <div class="snippet-footer">'+
c+'\n                            <button class="float-right copy-btn"  data-clipboard-action="copy" data-clipboard-target="#'+d+' .snippet-content">copy</button></div>\n                        </li>';$(".timeline").append(c).hide().slideDown(200)});new ClipboardJS(".copy-btn");tags=tags.filter(uniqueTags);tags.sort();$.each(tags,function(a,b){10>a&&$(".page-tags").append("<button class='snippet-tag-link' onclick='filterOnTag(\""+b+"\")'>"+b+"</button>");10==a&&$(".page-tags").append("<button class='snippet-tag-link' onclick='showAllTags()'>more ...</button>")})})}
function getSheetId(){var a=document.getElementsByTagName("script");return a[a.length-1].getAttribute("data-id")}function newSnippet(){snippet={title:$("#new-snippet-title").val(),content:$("#new-snippet-content").val(),meta:$("#new-snippet-meta").val(),tags:$("#new-snippet-tags").val(),token:$("#new-snippet-token").val()};"AQW"==snippet.token&&$.post("https://hooks.zapier.com/hooks/catch/2756301/q80edt/",snippet,function(a,b){console.log("Data: "+a+"\nStatus: "+b)})}
function showAllTags(){$(".page-tags").empty();$(".page-tags").append("<button class='snippet-tag-link' onclick='filterOnTag(\"all\")'>all</button>");$.each(tags,function(a,b){$(".page-tags").append("<button class='snippet-tag-link' onclick='filterOnTag(\""+b+"\")'>"+b+"</button>")})}
function filterOnTag(a){"all"==a?($(".snippet-li").show(),$(".snippet-counter").html($(".snippet-li").length+" snippets found")):($(".snippet-li").hide(),$("."+a).show(),counter_suffix=1==$("."+a).length?" snippet found":" snippets found",$(".snippet-counter").html($("."+a).length+counter_suffix))}function uniqueTags(a,b,c){return c.indexOf(a)===b}
function getUrlParam(a,b){b||(b=location.href);a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var c=(new RegExp("[\\?&]"+a+"=([^&#]*)")).exec(b);return null==c?null:c[1]};